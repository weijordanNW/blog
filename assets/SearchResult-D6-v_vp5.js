import{u as U,i as te,l as ae,m as M,p as se,P as le,q as Ee,s as re,k as b,v as f,x as ue,y as Y,j as a,z as ie,R as T,A as Ae,B as ne,C as oe,D as ce,E as ve,G as he,H as ye,I as de,J as pe,K as H,L as me,M as Ce,N as ge,O as $,Q as I,S as Be}from"./app-DyFEj1-h.js";const Fe=["/","/intro.html","/en/","/en/intro.html","/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/csdn.html","/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/flowus.html","/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/github.html","/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/yuque.html","/en/demo/","/en/demo/disable.html","/en/demo/encrypt.html","/en/demo/layout.html","/en/demo/markdown.html","/en/demo/page.html","/en/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/csdn.html","/en/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/flowus.html","/en/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/github.html","/en/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/yuque.html","/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/1.html","/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/2.html","/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/3.html","/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/4.html","/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%90%8E%E7%AB%AF/1.html","/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%90%8E%E7%AB%AF/2.html","/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%90%8E%E7%AB%AF/3.html","/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%90%8E%E7%AB%AF/4.html","/en/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/1.html","/en/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/2.html","/en/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/3.html","/en/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/4.html","/en/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%90%8E%E7%AB%AF/1.html","/en/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%90%8E%E7%AB%AF/2.html","/en/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%90%8E%E7%AB%AF/3.html","/en/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%90%8E%E7%AB%AF/4.html","/404.html","/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/","/en/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/","/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/","/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%90%8E%E7%AB%AF/","/en/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/","/en/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%90%8E%E7%AB%AF/","/category/","/category/%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/","/category/%E6%8C%87%E5%8D%97/","/category/csdn/","/category/flowus/","/category/%E6%96%87%E7%AB%A0/","/category/%E8%AF%AD%E9%9B%80/","/category/guide/","/category/%E5%89%8D%E7%AB%AF/","/category/javascript/","/category/vue/","/category/react/","/category/node.js/","/category/express/","/category/linux/","/category/c/","/tag/","/tag/%E7%A6%81%E7%94%A8/","/tag/%E5%8A%A0%E5%AF%86/","/tag/%E5%B8%83%E5%B1%80/","/tag/markdown/","/tag/%E9%A1%B5%E9%9D%A2%E9%85%8D%E7%BD%AE/","/tag/%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/","/tag/disable/","/tag/encryption/","/tag/layout/","/tag/page-config/","/tag/guide/","/article/","/star/","/timeline/"],De="SEARCH_PRO_QUERY_HISTORY",p=U(De,[]),fe=()=>{const{queryHistoryCount:s}=H,l=s>0;return{enabled:l,queryHistory:p,addQueryHistory:E=>{l&&(p.value=Array.from(new Set([E,...p.value.slice(0,s-1)])))},removeQueryHistory:E=>{p.value=[...p.value.slice(0,E),...p.value.slice(E+1)]}}},L=s=>Fe[s.id]+("anchor"in s?`#${s.anchor}`:""),He="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:_}=H,m=U(He,[]),Re=()=>{const s=_>0;return{enabled:s,resultHistory:m,addResultHistory:l=>{if(s){const E={link:L(l),display:l.display};"header"in l&&(E.header=l.header),m.value=[E,...m.value.slice(0,_-1)]}},removeResultHistory:l=>{m.value=[...m.value.slice(0,l),...m.value.slice(l+1)]}}},ke=s=>{const l=ce(),E=M(),R=ve(),u=b(0),B=f(()=>u.value>0),h=he([]);return ye(()=>{const{search:y,terminate:k}=de(),C=pe(n=>{const g=n.join(" "),{searchFilter:w=v=>v,splitWord:Q,suggestionsFilter:j,...d}=l.value;g?(u.value+=1,y(n.join(" "),E.value,d).then(v=>w(v,g,E.value,R.value)).then(v=>{u.value-=1,h.value=v}).catch(v=>{console.warn(v),u.value-=1,u.value||(h.value=[])})):h.value=[]},H.searchDelay-H.suggestDelay);Y([s,E],([n])=>C(n),{immediate:!0}),me(()=>{k()})}),{isSearching:B,results:h}};var Qe=te({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(s,{emit:l}){const E=ae(),R=M(),u=se(le),{enabled:B,addQueryHistory:h,queryHistory:y,removeQueryHistory:k}=fe(),{enabled:C,resultHistory:n,addResultHistory:g,removeResultHistory:w}=Re(),Q=B||C,j=Ee(s,"queries"),{results:d,isSearching:v}=ke(j),r=re({isQuery:!0,index:0}),o=b(0),c=b(0),O=f(()=>Q&&(y.value.length>0||n.value.length>0)),q=f(()=>d.value.length>0),x=f(()=>d.value[o.value]||null),z=()=>{const{isQuery:e,index:t}=r;t===0?(r.isQuery=!e,r.index=e?n.value.length-1:y.value.length-1):r.index=t-1},G=()=>{const{isQuery:e,index:t}=r;t===(e?y.value.length-1:n.value.length-1)?(r.isQuery=!e,r.index=0):r.index=t+1},J=()=>{o.value=o.value>0?o.value-1:d.value.length-1,c.value=x.value.contents.length-1},K=()=>{o.value=o.value<d.value.length-1?o.value+1:0,c.value=0},N=()=>{c.value<x.value.contents.length-1?c.value+=1:K()},V=()=>{c.value>0?c.value-=1:J()},S=e=>e.map(t=>Be(t)?t:a(t[0],t[1])),W=e=>{if(e.type==="customField"){const t=Ce[e.index]||"$content",[i,D=""]=ge(t)?t[R.value].split("$content"):t.split("$content");return e.display.map(A=>a("div",S([i,...A,D])))}return e.display.map(t=>a("div",S(t)))},F=()=>{o.value=0,c.value=0,l("updateQuery",""),l("close")},X=()=>B?a("ul",{class:"search-pro-result-list"},a("li",{class:"search-pro-result-list-item"},[a("div",{class:"search-pro-result-title"},u.value.queryHistory),y.value.map((e,t)=>a("div",{class:["search-pro-result-item",{active:r.isQuery&&r.index===t}],onClick:()=>{l("updateQuery",e)}},[a($,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},e),a("button",{class:"search-pro-remove-icon",innerHTML:I,onClick:i=>{i.preventDefault(),i.stopPropagation(),k(t)}})]))])):null,Z=()=>C?a("ul",{class:"search-pro-result-list"},a("li",{class:"search-pro-result-list-item"},[a("div",{class:"search-pro-result-title"},u.value.resultHistory),n.value.map((e,t)=>a(T,{to:e.link,class:["search-pro-result-item",{active:!r.isQuery&&r.index===t}],onClick:()=>{F()}},()=>[a($,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},[e.header?a("div",{class:"content-header"},e.header):null,a("div",e.display.map(i=>S(i)).flat())]),a("button",{class:"search-pro-remove-icon",innerHTML:I,onClick:i=>{i.preventDefault(),i.stopPropagation(),w(t)}})]))])):null;return ue("keydown",e=>{if(s.isFocusing){if(q.value){if(e.key==="ArrowUp")V();else if(e.key==="ArrowDown")N();else if(e.key==="Enter"){const t=x.value.contents[c.value];h(s.queries.join(" ")),g(t),E.push(L(t)),F()}}else if(C){if(e.key==="ArrowUp")z();else if(e.key==="ArrowDown")G();else if(e.key==="Enter"){const{index:t}=r;r.isQuery?(l("updateQuery",y.value[t]),e.preventDefault()):(E.push(n.value[t].link),F())}}}}),Y([o,c],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>a("div",{class:["search-pro-result-wrapper",{empty:s.queries.length?!q.value:!O.value}],id:"search-pro-results"},s.queries.length?v.value?a(ie,{hint:u.value.searching}):q.value?a("ul",{class:"search-pro-result-list"},d.value.map(({title:e,contents:t},i)=>{const D=o.value===i;return a("li",{class:["search-pro-result-list-item",{active:D}]},[a("div",{class:"search-pro-result-title"},e||u.value.defaultTitle),t.map((A,ee)=>{const P=D&&c.value===ee;return a(T,{to:L(A),class:["search-pro-result-item",{active:P,"aria-selected":P}],onClick:()=>{h(s.queries.join(" ")),g(A),F()}},()=>[A.type==="text"?null:a(A.type==="title"?Ae:A.type==="heading"?ne:oe,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},[A.type==="text"&&A.header?a("div",{class:"content-header"},A.header):null,a("div",W(A))])])})])})):u.value.emptyResult:Q?O.value?[X(),Z()]:u.value.emptyHistory:u.value.emptyResult)}});export{Qe as default};
